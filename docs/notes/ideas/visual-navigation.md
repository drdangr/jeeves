# Расширение интерфейса для визуальной навигации по контенту

## Цель

Предоставить пользователю возможность ориентироваться в знаниевой базе не только через текстовый ввод, но и через визуальные структуры: графы, деревья, временные шкалы. Основное внимание при этом уделяется сохранению фокуса на содержимом Markdown-документов.

## Общий принцип интерфейса

Интерфейс Дживса проектируется как модульный, по образцу Obsidian:

- Центральное окно отображает содержимое текущего Markdown-документа.
    
- Все остальные визуальные компоненты (граф, дерево, шкала, облако тегов и пр.) — это **инструменты навигации**, которые влияют на то, какой документ открыт.
    
- При кликах на узлы графа, элементы дерева, теги или точки шкалы центральное окно обновляется и показывает связанный фрагмент.
    
- Такой подход позволяет одновременно ориентироваться по структуре, смысловым связям и временной оси, сохраняя фокус на основном содержимом.
    

## Возможные инструменты

### 1. Облако тегов

- Текстовая визуализация наиболее часто используемых тегов
    
- Размер шрифта зависит от частоты упоминаний
    
- Цвет может отражать насыщенность контента, связанного с тегом
    
- Кликабельно: переход к связанной документации, фильтрация
    
- Подходит как компактное дополнение к графу или дереву
    

### 2. Граф связей

- Узлы: понятия, теги, темы, источники
    
- Рёбра: контекстные связи (упоминания, гиперссылки, пересечения)
    
- Возможность выделить подграф по теме запроса
    
- Навигация и взаимодействие по аналогии с Obsidian Graph View:
    
    - масштабирование и панорамирование
        
    - фильтрация по тегам, типу узлов, источникам
        
    - подсветка и раскрытие ближайших связей
        
    - поддержка перехода по ссылкам между документами
        

### 3. Дерево знаний

- Древовидная структура всех сущностей (документы, главы, персонажи, события)
    
- Кликабельные узлы
    
- Связь с реальным содержанием Markdown-файлов
    

### 4. Временные шкалы и сюжетные ленты

- Единая масштабируемая временная шкала, на которую наносятся все события, действия и упоминания, связанные с моментами времени
    
- Визуализация хронологии ключевых событий вселенной (войны, реформы, основания городов)
    
- Отображение биографий персонажей и последовательностей их появления в контенте
    
- Структурирование развития сюжетных линий, арок или тем
    
- Сортировка и фильтрация по тегам, персонажам, временным меткам
    
- Кликабельные события ведут к связанным документам или фрагментам
    
- Возможность отображения в виде масштабируемой временной шкалы или синхронизированных горизонтальных лент
    
- Источником данных выступают:
    
    - явные временные привязки, распознанные и структурированные модулем [[docs/architecture/ingest|Ingest]]
        
    - логически выводимые временные отношения, построенные модулем [[docs/architecture/analyst|Analyst]], например: «А уже ушёл, когда В прибыл» или «Сцена X происходит до события Y»
        

### 5. Интерактивная карта контекста ответа

- При ответе на вопрос отображаются фрагменты (чанки), из которых собрана реплика
    
- Эти чанки — результат работы модуля [[docs/architecture/ingest|Ingest]], который разбивает контент на смысловые единицы
    
- Каждый чанк визуализируется как карточка, блок или узел, включающий текст, теги, источник, позицию
    
- Пользователь может:
    
    - раскрыть или скрыть чанк,
        
    - исключить его из ответа,
        
    - перейти к исходному документу,
        
    - заменить на альтернативный фрагмент
        
- Это повышает прозрачность, доверие к ответу и позволяет управлять итоговой формулировкой
    

---

## Встраивание в архитектуру

- Расширение модуля [[docs/architecture/interface|Интерфейс]]
    
- Подключение к хранилищу индексов и тегов от модуля [[docs/architecture/ingest|Ingest]]
    
- Используется как дополнение к обычному текстовому выводу
    
- Может быть связан с `overview`, `status/current`, а также `learner`, если навигация включает интерактивную обратную связь
    

---

## Реализация Markdown-интерфейса

- Markdown-просмотр — центральная панель, куда выводятся документы
    
- Поддержка предпросмотра по ссылкам (в стиле Obsidian)
    
- Возможность переходов между файлами, кликов по тегам, вложенным ссылкам и перекрёстным якорям
    

## Инструменты

- `vis.js`, `d3.js`, `pyvis`, `graphviz`, `recharts` — библиотеки визуализации для графов, временных лент и интерактивных структур
    
- Использование `HTML/JS` для встраивания в Streamlit или собственный веб-интерфейс
    
- Поддержка Markdown-интеграции через гиперссылки и предпросмотр (`Obsidian-style link preview`)
    
- (в будущем) WebGL и canvas-анимации — для отрисовки сложных структур с множеством узлов и временных взаимодействий
    
- Возможность синхронизации с результатами RAG-запросов и отображения логики работы модулей (например, «вот из каких чанков был собран этот ответ»)